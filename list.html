<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cat Breeds Gallery</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="icon"
        href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSV3pl04FKpjOquOaBG6QbrGR9yvjzYXRftgPgkNrUmzsdUXXL7OwDRLn3lwmJX9VHlRhg&usqp=CAU">

</head>

<style>
    .carousel img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        border: 2px solid #FFD700;
        border-radius: 5px;
    }
</style>

<body id="body" data-bs-theme="light">
    <nav
        class="navbar navbar-expand-lg bg-body-tertiary shadow fixed-top animate__animated animate__fadeInDown animate__slow">
        <div class="container-fluid loadingBarContainer">
            <div class="loadingBar" id="loadingBar"></div>
        </div>
        <div class="container-fluid">
            <a class="navbar-brand" href="#" target="blank" style="color: #EE8130">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="40" height="24"
                    style="color: #EE8130">
                    <path fill="#ee8130"
                        d="M320 192l17.1 0c22.1 38.3 63.5 64 110.9 64c11 0 21.8-1.4 32-4l0 4 0 32 0 192c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-140.8L280 448l56 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-144 0c-53 0-96-43-96-96l0-223.5c0-16.1-12-29.8-28-31.8l-7.9-1c-17.5-2.2-30-18.2-27.8-35.7s18.2-30 35.7-27.8l7.9 1c48 6 84.1 46.8 84.1 95.3l0 85.3c34.4-51.7 93.2-85.8 160-85.8zm160 26.5s0 0 0 0c-10 3.5-20.8 5.5-32 5.5c-28.4 0-54-12.4-71.6-32c0 0 0 0 0 0c-3.7-4.1-7-8.5-9.9-13.2C357.3 164 352 146.6 352 128c0 0 0 0 0 0l0-96 0-20 0-1.3C352 4.8 356.7 .1 362.6 0l.2 0c3.3 0 6.4 1.6 8.4 4.2c0 0 0 0 0 .1L384 21.3l27.2 36.3L416 64l64 0 4.8-6.4L512 21.3 524.8 4.3c0 0 0 0 0-.1c2-2.6 5.1-4.2 8.4-4.2l.2 0C539.3 .1 544 4.8 544 10.7l0 1.3 0 20 0 96c0 17.3-4.6 33.6-12.6 47.6c-11.3 19.8-29.6 35.2-51.4 42.9zM432 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z" />
                </svg>
                <b style="font-family: 'Helvetica'">Purrfectly Bred</b>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto" style="font-family: 'Helvetica'">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="project4.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Back to Top</a>
                    </li>
                </ul>
                <button class="btn btn-outline-secondary ms-2 btnMode" onclick="changeMode()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
                        <path
                            d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278">
                        </path>
                        <path
                            d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.73 1.73 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.73 1.73 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.73 1.73 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z">
                        </path>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row mt-5 animate__animated">
            <div class="col">
                <h1 class="display-3 mt-5">Gallery</h1>
            </div>
        </div>
        <div class="row animate__animated" id="cardContainer">
        </div>
    </div>

    <div class="container">
        <div class="row my-5 animate__animated">
            <div class="col">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center">
                        <li class="page-item">
                            <a class="page-link btnMode me-2" onclick="prevPage()">Previous</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link btnMode" onclick="nextPage()">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        var cardContainer = document.getElementById("cardContainer");
        var loadingBar = document.getElementById("loadingBar");
        var page = 1;
        const breedsPerPage = 12;

        const loadBreeds = async () => {
            var startIndex = 1 + ((page - 1) * breedsPerPage);
            var breedCount = startIndex + breedsPerPage - 1;

            const response = await fetch('https://api.thecatapi.com/v1/breeds');
            const breeds = await response.json();

            for (var i = startIndex - 1; i < Math.min(breedCount, breeds.length); i++) {
                const breed = breeds[i];
                const imgResponse = await fetch('https://api.thecatapi.com/v1/images/search?breed_ids=' + breed.id + '&limit=5');
                const imgData = await imgResponse.json();

                var carouselItems = imgData.length > 0
                    ? imgData.map((image, index) => `
                        <div class="carousel-item ${index === 0 ? 'active' : ''}">
                          <img src="${image.url}" alt="${breed.name}" class="d-block w-100" style="height: 250px; object-fit: cover;" />
                        </div>
                      `).join('')
                    : `
                        <div class="carousel-item active">
                          <img src="https://via.placeholder.com/400x300?text=No+Image+Available" alt="No Image" class="d-block w-100" style="height: 250px; object-fit: cover;" />
                        </div>
                      `;

                cardContainer.innerHTML += `
                    <div class="col-sm-6 col-md-4 col-lg-3 animate__animated">
                      <div class="card rounded-5 my-3">
                        <div id="carousel${i}" class="carousel slide" data-bs-ride="carousel">
                          <div class="carousel-inner">
                            ${carouselItems}
                          </div>
                          <button class="carousel-control-prev" type="button" data-bs-target="#carousel${i}" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                          </button>
                          <button class="carousel-control-next" type="button" data-bs-target="#carousel${i}" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                          </button>
                        </div>
                        <div class="breedName">
                            <a href="view.html?breedId=${breed.id}">
                              ${breed.name}
                            </a>
                        </div>
                        <div class="breedOrigin">
                            <a href="view.html?breedId=${breed.id}">
                              ${breed.origin}
                            </a>
                        </div>
                      </div>
                    </div>
                   `;

                loadingBar.style.width = (((i - startIndex + 1) / breedsPerPage) * 100) + '%';
            }
            loadingBar.style.width = '100%';
        };

        loadBreeds();

        function nextPage() {
            cardContainer.innerHTML = "";
            loadingBar.style.width = "0%";
            page += 1;
            loadBreeds();
        }

        function prevPage() {
            cardContainer.innerHTML = "";
            loadingBar.style.width = "0%";
            page -= 1;
            loadBreeds();
        }

        var colorMode = "light";
        function changeMode() {
            var bodyElement = document.getElementById("body");
            colorMode = colorMode == "dark" ? "light" : "dark";
            bodyElement.setAttribute("data-bs-theme", colorMode);
        }

        // IntersectionObserver for animation on scroll
        document.addEventListener("DOMContentLoaded", function () {
            const elements = document.querySelectorAll(".animate__animated");

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("animate__fadeIn", "animate__slow");
                        entry.target.style.opacity = "1";
                    } else {
                        entry.target.classList.remove("animate__fadeIn", "animate__slow");
                        entry.target.style.opacity = "0";
                    }
                });
            }, { threshold: 0.1 });

            elements.forEach(element => {
                element.style.opacity = "0";
                observer.observe(element);
            });
        });
    </script>
</body>

</html>